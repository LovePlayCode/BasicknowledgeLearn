<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <label>
      请输入用户名:
      <input class="inputWrapper" />
    </label>
  </body>
  <script>
    function throttle(fn, interval) {
      let lastTime = 0;
      const _throttle = function (...args) {
        //首先拿到当前的时间
        const nowTime = new Date().getTime();
        //传递进来的时间间隔 用当前的时间减去上一次触发的时间
        //得到最新的剩余时间
        const reamainTime = interval - (nowTime - lastTime);
        if (reamainTime <= 0) {
          fn.apply(this, args);
          //如果剩余时间小于0 说明已经达到一个间隔
          //并且将现在的时间赋值给lastTime
          //在时间间隔内 这样无论执行多少次 都只会执行第一次的操作
          //因为第一次的lastTime是0 而nowTime是比较大的
          //减去之后一定是个负数 所以会执行第一次
          //而不会执行后续的操作
          lastTime = nowTime;
        }
      };
      return _throttle;
    }

    const inputWrapper = document.querySelector(".inputWrapper");
    const throttleFn = throttle((e) => {
      console.log("打印信息==>", e);
    }, 1000);
    inputWrapper.addEventListener("input", (e) => {
      throttleFn(e);
    });
  </script>
</html>
